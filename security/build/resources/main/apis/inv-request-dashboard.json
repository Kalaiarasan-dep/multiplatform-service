{
  "select": {
    "useDefaultAlways" : true,
    "default": {
      "query": "WITH dashboard AS ( SELECT (select count(*) from `order` where status_id=3 and bulk_upload_file_id in \n(SELECT id FROM bulk_upload_file where user_id=u.id)) AS approved_invoice_request,\n        (select sum(os.claimed_amount) from `order` os where status_id=3 and bulk_upload_file_id in \n(SELECT id FROM bulk_upload_file where user_id=u.id)) AS Approved_Invoice_Requested_amount,\n        SUM(CASE WHEN ir.status_id IN (7, 8, 10, 11, 12, 14, 17) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Invoice_Requested_amount,\n        SUM(CASE WHEN ir.status_id IN (7, 8, 10, 11, 12, 14, 17) THEN 1 ELSE 0 END) AS Invoice_Requested_count,\n        SUM(CASE WHEN ir.status_id = 8 THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Paid_amount,\n        SUM(CASE WHEN ir.status_id = 8 THEN 1 ELSE 0 END) AS Paid_count,\n        SUM(CASE WHEN ir.status_id IN (7, 17) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS To_be_paid_amount,\n        SUM(CASE WHEN ir.status_id IN (7, 17) THEN 1 ELSE 0 END) AS To_be_paid_count,\n        SUM(CASE WHEN ir.status_id IN (7, 8, 17) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Submissions_approved_invoice_amount,\n        SUM(CASE WHEN ir.status_id IN (7, 8, 17) THEN 1 ELSE 0 END) AS Submissions_approved_invoice_count,\n        SUM(CASE WHEN ir.status_id IN (11, 12) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Submissions_unapproved_invoice_amount,\n        SUM(CASE WHEN ir.status_id IN (11, 12) THEN 1 ELSE 0 END) AS Submissions_unapproved_invoice_count,\n        (\n            SELECT SUM(COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0))\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) <= 30\n              AND irs.status_id = 14\n              AND u.id = irs.request_raised_by\n        ) AS pending_submission_amount_less_than_30,\n        (\n            SELECT COUNT(*)\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) <= 30\n              AND irs.status_id = 14\n              AND u.id = irs.request_raised_by\n        ) AS pending_submission_less_than_30_count,\n        (\n            SELECT SUM(COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0))\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) > 30\n              AND irs.status_id = 14\n              AND u.id = irs.request_raised_by\n        ) AS pending_submission_amount_more_than_30,\n        (\n            SELECT COUNT(*)\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) > 30\n              AND irs.status_id = 14\n              AND u.id = irs.request_raised_by\n        ) AS pending_submission_more_than_30_count\n    FROM\n        invoice_request ir\n    JOIN\n        user u ON u.id = ir.request_raised_by\n    WHERE\n        u.id = :userid\n)\nSELECT\n    JSON_OBJECT(\n        'approved_invoice_request', IFNULL(approved_invoice_request, 0),\n        'Approved_Invoice_Requested_amount', IFNULL(Approved_Invoice_Requested_amount, 0),\n        'Invoice_Requested_amount', IFNULL(Invoice_Requested_amount, 0),\n        'Invoice_Requested_count', IFNULL(Invoice_Requested_count, 0),\n        'Paid_amount', IFNULL(Paid_amount, 0),\n        'Paid_count', IFNULL(Paid_count, 0),\n        'To_be_paid_amount', IFNULL(To_be_paid_amount, 0),\n        'To_be_paid_count', IFNULL(To_be_paid_count, 0),\n        'Pending_invoice_submissions', IFNULL(pending_submission_amount_more_than_30, 0) + IFNULL(pending_submission_amount_less_than_30, 0),\n        'Payments', IFNULL(To_be_paid_amount, 0) + IFNULL(Paid_amount, 0),\n        'Submitted_invoices', IFNULL(Submissions_approved_invoice_amount, 0) + IFNULL(Submissions_unapproved_invoice_amount, 0),\n        'Approved_orders', IFNULL(Approved_Invoice_Requested_amount, 0) + IFNULL(Invoice_Requested_amount, 0),\n        'Submissions_approved_invoice_amount', IFNULL(Submissions_approved_invoice_amount, 0),\n        'Submissions_approved_invoice_count', IFNULL(Submissions_approved_invoice_count, 0),\n        'Submissions_unapproved_invoice_amount', IFNULL(Submissions_unapproved_invoice_amount, 0),\n        'Submissions_unapproved_invoice_count', IFNULL(Submissions_unapproved_invoice_count, 0),\n        'pending_submission_amount_less_than_30', IFNULL(pending_submission_amount_less_than_30, 0),\n        'pending_submission_less_than_30_count', IFNULL(pending_submission_less_than_30_count, 0),\n        'pending_submission_amount_more_than_30', IFNULL(pending_submission_amount_more_than_30, 0),\n        'pending_submission_more_than_30_count', IFNULL(pending_submission_more_than_30_count, 0)\n    ) AS data\nFROM\n    dashboard;",
      "postProcessor": "dashboardPostProcessor"
    },
    "default_SUPER_ADMIN": {
      "query": "WITH dashboard AS (SELECT (select count(*) from `order` where status_id=3 and bulk_upload_file_id in \n(SELECT id FROM bulk_upload_file where user_id=u.id)) AS approved_invoice_request,\n        (select sum(os.claimed_amount) from `order` os where status_id=3 and bulk_upload_file_id in \n(SELECT id FROM bulk_upload_file where user_id=u.id)) AS Approved_Invoice_Requested_amount,\n        SUM(CASE WHEN ir.status_id IN (7, 8, 10, 11, 12, 14) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Invoice_Requested_amount,\n        SUM(CASE WHEN ir.status_id IN (7, 8, 10, 11, 12, 14) THEN 1 ELSE 0 END) AS Invoice_Requested_count,\n        SUM(CASE WHEN ir.status_id = 8 THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Paid_amount,\n        SUM(CASE WHEN ir.status_id = 8 THEN 1 ELSE 0 END) AS Paid_count,\n        SUM(CASE WHEN ir.status_id IN (7) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS To_be_paid_amount,\n        SUM(CASE WHEN ir.status_id IN (7) THEN 1 ELSE 0 END) AS To_be_paid_count,\n        SUM(CASE WHEN ir.status_id IN (7, 8) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Submissions_approved_invoice_amount,\n        SUM(CASE WHEN ir.status_id IN (7, 8) THEN 1 ELSE 0 END) AS Submissions_approved_invoice_count,\n        SUM(CASE WHEN ir.status_id IN (11, 12) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Submissions_unapproved_invoice_amount,\n        SUM(CASE WHEN ir.status_id IN (11, 12) THEN 1 ELSE 0 END) AS Submissions_unapproved_invoice_count,\n        (\n            SELECT SUM(COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0))\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) <= 30\n              AND irs.status_id = 14\n              AND u.id = irs.request_raised_by\n        ) AS pending_submission_amount_less_than_30,\n        (\n            SELECT COUNT(*)\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) <= 30\n              AND irs.status_id = 14\n              AND u.id = irs.request_raised_by\n        ) AS pending_submission_less_than_30_count,\n        (\n            SELECT SUM(COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0))\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) > 30\n              AND irs.status_id = 14\n              AND u.id = irs.request_raised_by\n        ) AS pending_submission_amount_more_than_30,\n        (\n            SELECT COUNT(*)\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) > 30\n              AND irs.status_id = 14\n              AND u.id = irs.request_raised_by\n        ) AS pending_submission_more_than_30_count\n    FROM\n        invoice_request ir\n    JOIN\n        user u ON u.id = ir.request_raised_by\n    WHERE\n        u.id = :userid\n)\nSELECT\n    JSON_OBJECT(\n        'approved_invoice_request', IFNULL(approved_invoice_request, 0),\n        'Approved_Invoice_Requested_amount', IFNULL(Approved_Invoice_Requested_amount, 0),\n        'Invoice_Requested_amount', IFNULL(Invoice_Requested_amount, 0),\n        'Invoice_Requested_count', IFNULL(Invoice_Requested_count, 0),\n        'Paid_amount', IFNULL(Paid_amount, 0),\n        'Paid_count', IFNULL(Paid_count, 0),\n        'To_be_paid_amount', IFNULL(To_be_paid_amount, 0),\n        'To_be_paid_count', IFNULL(To_be_paid_count, 0),\n        'Pending_invoice_submissions', IFNULL(pending_submission_amount_more_than_30, 0) + IFNULL(pending_submission_amount_less_than_30, 0),\n        'Payments', IFNULL(To_be_paid_amount, 0) + IFNULL(Paid_amount, 0),\n        'Submitted_invoices', IFNULL(Submissions_approved_invoice_amount, 0) + IFNULL(Submissions_unapproved_invoice_amount, 0),\n        'Approved_orders', IFNULL(Approved_Invoice_Requested_amount, 0) + IFNULL(Invoice_Requested_amount, 0),\n        'Submissions_approved_invoice_amount', IFNULL(Submissions_approved_invoice_amount, 0),\n        'Submissions_approved_invoice_count', IFNULL(Submissions_approved_invoice_count, 0),\n        'Submissions_unapproved_invoice_amount', IFNULL(Submissions_unapproved_invoice_amount, 0),\n        'Submissions_unapproved_invoice_count', IFNULL(Submissions_unapproved_invoice_count, 0),\n        'pending_submission_amount_less_than_30', IFNULL(pending_submission_amount_less_than_30, 0),\n        'pending_submission_less_than_30_count', IFNULL(pending_submission_less_than_30_count, 0),\n        'pending_submission_amount_more_than_30', IFNULL(pending_submission_amount_more_than_30, 0),\n        'pending_submission_more_than_30_count', IFNULL(pending_submission_more_than_30_count, 0)\n    ) AS data\nFROM\n    dashboard",
      "postProcessor": "dashboardPostProcessor"

    },
    "default_PARTNER": {
      "query": "WITH dashboard AS (SELECT (select count(*) from `order` where status_id=3 and partner_id in \n(SELECT partner_id FROM partner_has_user where user_id=u.id)) AS approved_invoice_request,\n        (select sum(os.claimed_amount) from `order` os where status_id=3 and partner_id in \n(SELECT partner_id FROM partner_has_user where user_id=u.id))  AS Approved_Invoice_Requested_amount,\n        SUM(CASE WHEN ir.status_id IN (7, 8, 10, 11, 12, 14) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Invoice_Requested_amount,\n        SUM(CASE WHEN ir.status_id IN (7, 8, 10, 11, 12, 14) THEN 1 ELSE 0 END) AS Invoice_Requested_count,\n        SUM(CASE WHEN ir.status_id = 8 THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Paid_amount,\n        SUM(CASE WHEN ir.status_id = 8 THEN 1 ELSE 0 END) AS Paid_count,\n        SUM(CASE WHEN ir.status_id IN (7) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS To_be_paid_amount,\n        SUM(CASE WHEN ir.status_id IN (7) THEN 1 ELSE 0 END) AS To_be_paid_count,\n        SUM(CASE WHEN ir.status_id IN (7, 8) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Submissions_approved_invoice_amount,\n        SUM(CASE WHEN ir.status_id IN (7, 8) THEN 1 ELSE 0 END) AS Submissions_approved_invoice_count,\n        SUM(CASE WHEN ir.status_id IN (11, 12) THEN COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0) ELSE 0 END) AS Submissions_unapproved_invoice_amount,\n        SUM(CASE WHEN ir.status_id IN (11, 12) THEN 1 ELSE 0 END) AS Submissions_unapproved_invoice_count,\n        (\n            SELECT SUM(COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0))\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) <= 30\n              AND irs.status_id = 14\n               and partner_id in \n(SELECT partner_id FROM partner_has_user where user_id=u.id)\n        ) AS pending_submission_amount_less_than_30,\n        (\n            SELECT COUNT(*)\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) <= 30\n              AND irs.status_id = 14\n              and partner_id in \n(SELECT partner_id FROM partner_has_user where user_id=u.id)\n        ) AS pending_submission_less_than_30_count,\n        (\n            SELECT SUM(COALESCE(total_amount, 0) + COALESCE(igst_rate, 0) + COALESCE(cgst_rate, 0) + COALESCE(sgst_rate, 0))\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) > 30\n              AND irs.status_id = 14\n              and partner_id in \n(SELECT partner_id FROM partner_has_user where user_id=u.id)\n        ) AS pending_submission_amount_more_than_30,\n        (\n            SELECT COUNT(*)\n            FROM invoice_request irs\n            WHERE DATEDIFF(CURDATE(), DATE(irs.create_dt)) > 30\n              AND irs.status_id = 14\n              and partner_id in \n(SELECT partner_id FROM partner_has_user where user_id=u.id)\n        ) AS pending_submission_more_than_30_count\n     FROM \n        invoice_request ir\n    INNER JOIN \n        partner_has_user phu ON phu.partner_id = ir.partner_id\n    INNER JOIN \n        user u ON u.id = phu.user_id\n    WHERE \n        u.id =:userid\n)\nSELECT\n    JSON_OBJECT(\n        'approved_invoice_request', IFNULL(approved_invoice_request, 0),\n        'Approved_Invoice_Requested_amount', IFNULL(Approved_Invoice_Requested_amount, 0),\n        'Invoice_Requested_amount', IFNULL(Invoice_Requested_amount, 0),\n        'Invoice_Requested_count', IFNULL(Invoice_Requested_count, 0),\n        'Paid_amount', IFNULL(Paid_amount, 0),\n        'Paid_count', IFNULL(Paid_count, 0),\n        'To_be_paid_amount', IFNULL(To_be_paid_amount, 0),\n        'To_be_paid_count', IFNULL(To_be_paid_count, 0),\n        'Pending_invoice_submissions', IFNULL(pending_submission_amount_more_than_30, 0) + IFNULL(pending_submission_amount_less_than_30, 0),\n        'Payments', IFNULL(To_be_paid_amount, 0) + IFNULL(Paid_amount, 0),\n        'Submitted_invoices', IFNULL(Submissions_approved_invoice_amount, 0) + IFNULL(Submissions_unapproved_invoice_amount, 0),\n        'Approved_orders', IFNULL(Approved_Invoice_Requested_amount, 0) + IFNULL(Invoice_Requested_amount, 0),\n        'Submissions_approved_invoice_amount', IFNULL(Submissions_approved_invoice_amount, 0),\n        'Submissions_approved_invoice_count', IFNULL(Submissions_approved_invoice_count, 0),\n        'Submissions_unapproved_invoice_amount', IFNULL(Submissions_unapproved_invoice_amount, 0),\n        'Submissions_unapproved_invoice_count', IFNULL(Submissions_unapproved_invoice_count, 0),\n        'pending_submission_amount_less_than_30', IFNULL(pending_submission_amount_less_than_30, 0),\n        'pending_submission_less_than_30_count', IFNULL(pending_submission_less_than_30_count, 0),\n        'pending_submission_amount_more_than_30', IFNULL(pending_submission_amount_more_than_30, 0),\n        'pending_submission_more_than_30_count', IFNULL(pending_submission_more_than_30_count, 0)\n    ) AS data\nFROM\n    dashboard",
      "postProcessor": "dashboardPostProcessor"
    },
    "suportRoleBasedQueries": true
  }
}